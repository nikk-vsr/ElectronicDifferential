
/******************************************************************************
*                      Includes
******************************************************************************/
#include"timer.h"
#include"ADC.h"
/******************************************************************************
*                      Defines and data types
******************************************************************************/


/******************************************************************************
*                      Global variables
******************************************************************************/

/******************************************************************************
*                      Static variables
******************************************************************************/
/******************************************************************************
*                      Internal function prototypes
******************************************************************************/
/******************************************************************************
*                      Public functions
******************************************************************************/
void timer_PWM_Init()
{
TCCR0A|= ((1<<WGM01) | (1<<WGM00));  // fast pwm mode
TCCR0A|= (1<< COM0A1); /* non inverting mode  // clear OC2A on compare match*/
TCCR0A&= ~(1<<COM0A0);

TCCR0A|= (1<< COM0B1); //* non inverting mode  // clear OC2B on compare match*/
TCCR0A&= ~(1<<COM0B0);

TCNT0=0x00;   /*Timer counter register*/
OCR0A=0x00;
OCR0B=0x00;
sei(); /* Global interrupt*/
}

void Fix_Right_PWM(int value)
{

  if(value<=255)
    {
    OCR0A=(value*255)/100; /* setting the PWM width for right motor*/
    }

}

void Fix_Left_PWM(int value)
{

  if(value<=255)
    {
    OCR0B=(value*255)/100; /* setting the PWM width for Left motor */
    }

}

void Enable_PWM()
{
    TCCR0B|= ((1<<CS00)); /*clock and WGM02*/
    TCCR0B&=~(1<<CS01);
    TCCR0B|=(1<<CS02); /*101    // timer is on*/
}

void Disable_PWM(){

   TCCR0B&=0X00;

}


/******************************************************************************
*                      Internal functions
******************************************************************************/

/******************************************************************************
*                      End of File
******************************************************************************/
